#!/usr/bin/env bash

set -e
# set -x

if [[ $1 = "" || ($1 = "new" && $2 = "") ]]; then
    echo "Usage: simplestack new <app_name>"
    echo "   or: simplestack [args]"
    exit 1
fi

export SIMPLE_STACK_COMMAND=$1
shift
export SIMPLE_STACK_ARGS=$@
export SIMPLE_STACK_PATH="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && cd .. && pwd )"

make -f ${SIMPLE_STACK_PATH}/Makefile ${SIMPLE_STACK_COMMAND} SIMPLE_STACK_ARGS="${SIMPLE_STACK_ARGS}"
